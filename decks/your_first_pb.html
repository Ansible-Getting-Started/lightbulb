<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Ansible Essentials Workshop</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/css/reveal.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/css/print/pdf.css' : 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>


    <link rel="stylesheet" href="css/theme/ansible.css">

    <!-- Theme used for syntax highlighting of code -->
    <!--link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/lib/css/zenburn.css"-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/themes/prism.min.css">


  </head>
  <body>
  <div class="ans-mark">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-449 450 125 125" style="enable-background:new -449 450 125 125;" xml:space="preserve">
      <g id="XMLID_3_">
        <circle id="XMLID_7_" class="circle" cx="-386.5" cy="512.5" r="62"/>
        <path id="XMLID_4_" class="a-mark" d="M-356.9,537.1l-24.7-59.4c-0.7-1.7-2.1-2.6-3.9-2.6c-1.7,0-3.2,0.9-4,2.6l-27.1,65.2h9.2 l10.7-26.9l32,25.9c1.3,1,2.2,1.5,3.4,1.5c2.4,0,4.6-1.8,4.6-4.5C-356.5,538.5-356.6,537.8-356.9,537.1z M-385.4,488.4l16.1,39.6 l-24.2-19L-385.4,488.4z"/>
      </g>
    </svg>
  </div>
    <div class="reveal">
      <div class="slides">
        <section data-state="cover">
          <p class="ans-logo"><img src="images/ansible-wordmark-white.svg" width="260" alt="" /></p>
          <h1>Writing your first playbook</h1>
          <!--p>NAME HERE, TITLE HERE</p>
          <p>COMPANY HERE</p-->
        </section>
        <section>
          <h2>Agenda</h2>
          <ul>
            <li>What is a playbook?</li>
            <li>What are we Automating</li>
            <li>What makes up a playbook</li>
            <li>YAML structuring and format</li>
            <li>Roles and Sharing Automation</li>
          </ul>
          <aside class="notes">
            <p>Speaker notes here </p>
          </aside>
        </section>
        <section>
            <h2>What are you automating?</h2>
            <ul>
              <li>What OS? What kinds of security measures are on the managed node?</li>
              <li>Ansible will do what you tell it to.</li>
            <ul>
            <aside class="notes">
              <p>What you are automating is crucial because it determines how you will write your playbooks.</p>
              <p>Are there multiple OSs that you wish to automate at once? What does the security on those machines look like?</p>
              <p>The answers to these questions all affect how you will structure your playbook.</p>
              <p>To follow that up, ansible assumes you know what you are doing. It will do exactly what you tell it do and exactly that order.</p>
              <p>So if you need to do something, lets say change a line in a conf file, remember to call a handler to restart that service if it needs to be. Ansible won't know to do that automatically.</p>
            </aside>
        </section>
        <section>
            <h2>What is a playbook?</h2>
              <p>A set of instructions to do something on a remote host(s)</p>
            <aside class="notes">
              <p>Imagine a set of instructions to do something, like building a piece of furniture. When those instructions are done in the exact order, the piece of furniture looks like the picture on the outside of the box.</p>
            </aside>
        </section>
        <section>
          <h2>What makes up a playbook?</h2>
          <ul>
            <li>Header</li>
            <li>Tasks</li>
            <li>Handlers</li>
          <aside class="notes">
            <p>There are 3 parts to a playbook. The header, tasks and then if you need them, handlers at the end.</p>
            <p>The header contains all of the necessary information in regards to what ansible is going to target and run against. The host information is contained here, the applicable variables etc.</p>
            <p>The tasks are the meat, the actual bits that describe and do the automating. The lineinfile actions, the yum bits. The next couple of slides, we will dig deeper into this.</p>
            <p>And finally, handlers, handling any restarts or notifies of things that might need some clean up after something is done.</p>
          </aside>
        </section>
        <section>
          <pre class="language-yaml"><code data-noescape>
---
- hosts: webservers
  vars:
    http_port: 80
    max_clients: 200
  remote_user: root
  tasks:
  - name: ensure apache is at the latest version
    yum:
      name: httpd
      state: latest
          </code></pre>
          <aside class="notes">
            <p>Here is a basic example of a playbook. Do note that the handlers are cut off here purely for the amount of space.</p>
            <p>At the top here you can see the header, stating what hosts the playbook is targeting and what vars to use. Note that for this example is using root but that you don't need to use root, just a user that has the correct privileges to make the changes.</p>
            <p>Then you get to the tasks, the good stuff. The meat of the playbook, the stuff that is making the changes.</p>
          </aside>
        </section>
        <section>
          <h2>Forming a task</h2>
            <p>Starts with a name</p>
            <p>The module and specific arguments</p>
            <p>Your variables can be used in arguments</p>
          <aside class="notes">
            <p>It all starts with a name. Naming a task is something very important because it is displayed during the execution of ansible. Name it something that is close to what the task is doing so that in case it fails, you know immediately how you can start debugging it.</p>
            <p>Next, you will need to pick a module. Your selection will depend on what you task you are trying to accomplish. You can find a list of all available modules at docs.ansible.com </p>
            <p>All modules include documentation on how they can be used and what are the required arguments for that module. There are also examples included on that same documentation page showing the module in use.</p>
          </aside>
        </section>
        <section>
          <h2>Conditionals</h2>
            <p>Yes, you can use them in playbooks</p>
            <p>Some of the most popular are:
              <ul>
                <li>When Statement</li>
                <li>Register</li>
            </p>
          <aside class="notes">
            <p>Diving deeper into the meat of tasks, you can use conditionals within tasks. Sometimes tasks depend on other things being present, or maybe you just want some tasks to run on certain hosts when a particular criteria is met.</p>
            <p>In come conditionals. We are only going to talk about the basic uses of them but if you want to see more in depth examples, there are a bunch of examples in the playbook section of our documentation.</p>
          </aside>
        </section>
        <section>
          <h2>When Statement</h2>
          <pre class="language-yaml"><code data-noescape>
tasks:
  - name: "shut down Debian flavored systems"
    command: /sbin/shutdown -t now
    when: ansible_facts['os_family'] == "Debian"
          </code></pre>
          <aside class="notes">
            <p>This could be something as simple as not installing a certain package if the operating system is a particular version.</p>
            <p>Above is an example of a simple when statement showing a task tha will only shutdown when the ansible_facts shows an OS family of Debian.</p>
          </aside>
        </section>
        <section>
          <h2>Using Loops</h2>
            <p></p>
        </section>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/lib/js/head.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/js/reveal.js"></script>

    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        history: true,
        width: "85%",
        height: "90%",
        transition: "fade",

        // More info https://github.com/hakimel/reveal.js#dependencies
        // Notes plugin must remain local for now.
        // See https://github.com/ansible/lightbulb/issues/125
        dependencies: [
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/markdown/marked.js' },
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js'},
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/components/prism-yaml.min.js'}
          //{ src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });
    </script>
  </body>
</html>
