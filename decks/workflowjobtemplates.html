<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Job Templates and Workflows in Ansible</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/css/reveal.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/css/print/pdf.css' : 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>


    <link rel="stylesheet" href="css/theme/ansible.css">

    <!-- Theme used for syntax highlighting of code -->
    <!--link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/lib/css/zenburn.css"-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/themes/prism.min.css">


  </head>
  <body>
  <div class="ans-mark">
    <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="-449 450 125 125" style="enable-background:new -449 450 125 125;" xml:space="preserve">
      <g id="XMLID_3_">
        <circle id="XMLID_7_" class="circle" cx="-386.5" cy="512.5" r="62"/>
        <path id="XMLID_4_" class="a-mark" d="M-356.9,537.1l-24.7-59.4c-0.7-1.7-2.1-2.6-3.9-2.6c-1.7,0-3.2,0.9-4,2.6l-27.1,65.2h9.2 l10.7-26.9l32,25.9c1.3,1,2.2,1.5,3.4,1.5c2.4,0,4.6-1.8,4.6-4.5C-356.5,538.5-356.6,537.8-356.9,537.1z M-385.4,488.4l16.1,39.6 l-24.2-19L-385.4,488.4z"/>
      </g>
    </svg>
  </div>
    <div class="reveal">
      <div class="slides">
        <section data-state="cover">
          <p class="ans-logo"><img src="images/ansible-wordmark-white.svg" width="260" alt="" /></p>
          <h1>Job Templates and Workflows in Ansible Tower</h1>
          <p>NAME HERE, TITLE HERE</p>
          <p>COMPANY HERE</p>
        </section>

        <section>
          <h2>General Ansible Tower Setup</h2>
          You will need: <br><br>
          <ul>
            <li>Inventory</li>
            <li>A project to select a playbook from</li>
            <li>Up-to-date credentials</li>
          </ul>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>

        <section>
          <h2>What is a Job Template?</h2>
          <ul>
            <li>A definition and set of parameters for running an Ansible playbook</li>
            <li>In Ansible Tower, they are a visual realization of the <font face="Courier New">ansible-playbook</font> command and all flags you can utilize when executing from the command line.</li>
            <li>It defines the combination of a playbook from a project, an inventory, a credential and any other Ansible parameters required to run.</li>
          </ul>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>

        <section>
          <h2>Before You Start</h2>
          <p>Whether you're invoking an inventory file or setting tags, you will
            be adding arguments as part of the job template.
            <br><br>It's recommended to know, before you start:</p>
          <ul>
            <li>How to connect to the machine (credentials) </li>
            <li>What you want to change on the machine (project/playbook)</li>
          </ul>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>

        <section>
          <h2>Creating a Job Template</h2>
          <ul>
            <li>Select Templates from the top of the screen:</li>
            <p><img src="images/first_one.png"></p>
            <li>Navigate to the "Add" drop-down box and select Job Template.</li>
          </ul>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>

        <section>
            <h2>Naming and Job Type</h2>
            <p><img src="images/first_row.png"></p>
            <ul>
              <li>Name the job template anything you like</li>
              <li>Descriptions are optional</li>
              <li>Select either "Check" or "Run" for Job Type:</li>
                <em><b>Check</b></em> performs a “dry run” of the playbook<br>
                <em><b>Run</b></em> will execute the tasks in the playbook on the selected hosts
              </ul>
            <aside class="notes">
              <p> Speaker notes</p>
            </aside>
        </section>

        <section>
            <h2>Inventory, Project, and Playbook Selection</h2>
            <p><img src="images/second_row.png"></p>
            <ul>
              <li>There is a “prompt on launch” option for the Inventory selection; users can alternatively invoke a more complex selection prompt at the beginning of a job using a Survey</li>
              <li>The Project option determines which playbooks can be selected</li>
              <li>Tower will not display the full file name of playbooks (<em>e.g.</em>, AWS.yml will display as AWS)</li>
            </ul>
            <aside class="notes">
            </aside>
        </section>

        <section>
          <h2>Credentials, Forks, Limits</h2>
          <p><img src="images/third_row.png"></p>
          <ul>
            <li>Choose the credential from the available options to be used with this job template</li>
            <li>Forks are the number of parallel or simultaneous processes to use while executing the playbook; a value of zero uses the Ansible default setting, which is five parallel processes unless overridden in <font face="Courier New">/etc/ansible/ansible.cfg</font></li>
            <li>The Limit option provides a host pattern to further constrain the list of hosts that will be managed or affected by the playbook; multiple patterns are allowed</li>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>

        <section>
          <h2>Verbosity, Instance Groups, Job Tags</h2>
          <p><img src="images/fourth_row.png"></p>
          <ul>
            <li>Verbosity controls the level of output Ansible will produce as the playbook executes</li>
            <li>Users can optionally select which Instance Groups the job template will run on</li>
            <li>Job tags are useful when you have a large playbook and want to run a specific part of a play or task; this option provides a comma-separated list of playbook tags to specify what parts of the playbooks should be executed</li>
          </ul>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>

        <section>
          <h2>Skip Tags, Labels, Show Changes</h2>
          <p><img src="images/fifth_row.png"></p>
          <ul>
            <li>Skip Tags is a useful option when you have a large playbook and want to skip specific parts of a play or task</li>
            <li>Labels are optional and can be used to describe the job template, <em>i.e.</em>, "test" or "dev"</li>
            <li>When Show Changes is on, users can see changes made by Ansible tasks</li>
          </ul>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>

        <section>
          <h2>Other Options</h2>
          <p><img src="images/other_options.png"></p>
          <ul>
            <li><em>Enable Privilege Escalation:</em>  Enable this to run the playbook as an administrator</li>
            <li><em>Allow Provisioning Callbacks:</em>  Enables a host to call back to Tower via the Tower API and launch a job from this job template</li>
            <li><em>Enable Concurrent Jobs:</em>  Allows simultaneous runs of this particular job template</li>
            <li><em>Use Fact Cache:</em>  When enabled, this activates an Ansible fact cache plugin for all hosts in an inventory related to the job running</li>
          </ul>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>

        <section>
          <h2>Job Template Example</h2>
          <p><img src="images/example_template.png"></p>
          <aside class="notes">
            <p>Speaker notes</p>
          </aside>
        </section>
        <section>
            <section data-state="title alt">
              <h1>Demo Time: <br/>[Optional slide; can show in Tower]</h1>
              <aside class="notes">
                <p></p>
              </aside>
            </section>
            <section data-state="title alt">
              <h1>See how it works? <br/>You can put sections inside of sections. (to remove the red just remove the data state)</h1>
              <aside class="notes">
                <p>Speaker notes</p>
              </aside>
            </section>
        </section>

        <section>
              <h2>You can make it simple...</h2>
              <p><img src="images/SimpleWorkflow.jpg"></p>
              <aside class="notes">
                <p>Speaker notes</p>
              </aside>
            </section>

            <section>
              <h2>...or complex!</h2>
              <p><img src="images/ComplicatedWorkflow.jpg"></p>
              <aside class="notes">
                <p>Speaker notes</p>
              </aside>
            </section>


        <section>
          <h2>For More Information</h2>
            <p><b>Official Ansible Documentation:</b><br><br>
            https://docs.ansible.com/ansible-tower/latest/html/userguide/job_templates.html
            <br><br><br>
            <b>Blog Post:</b><br><br>
            https://www.ansible.com/blog/getting-started-setting-up-an-ansible-job-template
            </p>
        </section>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/lib/js/head.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/js/reveal.js"></script>

    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        history: true,
        width: "85%",
        height: "90%",
        transition: "fade",

        // More info https://github.com/hakimel/reveal.js#dependencies
        // Notes plugin must remain local for now.
        // See https://github.com/ansible/lightbulb/issues/125
        dependencies: [
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/markdown/marked.js' },
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/markdown/markdown.js' },
          { src: 'plugin/notes/notes.js', async: true },
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js'},
          { src: 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/components/prism-yaml.min.js'}
          //{ src: 'https://cdnjs.cloudflare.com/ajax/libs/reveal.js/3.4.1/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
        ]
      });
    </script>
  </body>
</html>
